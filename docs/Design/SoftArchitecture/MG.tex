\documentclass[12pt, titlepage]{article}

\usepackage{fullpage}
\usepackage[round]{natbib}
\usepackage{multirow}
\usepackage{booktabs}
\usepackage{tabularx}
\usepackage{graphicx}
\usepackage{float}
\usepackage{hyperref}
\hypersetup{
    colorlinks,
    citecolor=blue,
    filecolor=black,
    linkcolor=red,
    urlcolor=blue
}

\input{../../Comments}
\input{../../Common}

\newcounter{acnum}
\newcommand{\actheacnum}{AC\theacnum}
\newcommand{\acref}[1]{AC\ref{#1}}

\newcounter{ucnum}
\newcommand{\uctheucnum}{UC\theucnum}
\newcommand{\uref}[1]{UC\ref{#1}}

\newcounter{mnum}
\newcommand{\mthemnum}{M\themnum}
\newcommand{\mref}[1]{M\ref{#1}}

\begin{document}

\title{Module Guide for \progname{}} 
\author{\authname}
\date{\today}

\maketitle

\pagenumbering{roman}

\section{Revision History}

\begin{tabularx}{\textwidth}{p{3cm}p{2cm}X}
\toprule {\bf Date} & {\bf Version} & {\bf Notes}\\
\midrule
Date 1 & 1.0 & Notes\\
Date 2 & 1.1 & Notes\\
\bottomrule
\end{tabularx}

\newpage

\section{Reference Material}

This section records information for easy reference.

\subsection{Abbreviations and Acronyms}

\renewcommand{\arraystretch}{1.2}
\begin{tabular}{l l} 
  \toprule		
  \textbf{symbol} & \textbf{description}\\
  \midrule 
  AC & Anticipated Change\\
  UC & Unlikely Change \\
  M & Module \\
  SRS & Software Requirements Specification \\
  HA & Hazard Analysis \\
  VnVPlan & Verification and Validation Plan\\
  MIS & Module Interface Specification\\
  MVC & Model-view-controller, a well-known software design pattern \\
  FR & Functional Requirement \\
  LF & Look and Feel Requirement \\
  PR & Performance Requirement \\
  OE & Operational and Environmental Requirements \\
  HS & Health and Safety Requirements \\
  MS & Maintainability and Support Requirement \\
  SR & Security Requirement \\
  CR & Cultural Requirement \\
  LR & Legal Requirement\\
  HTTP & Hypertext Transfer Protocol \\
  OS &  Operating System\\
  STUN & Session Traversal Utilities for NAT - a type of server needed for setting up peer-to-peer connections \\
  RTC & Real-Time Communication  \\
  SFU & Selective Forwarding Unit - A software unit that can selectively forward video streams \\
  
  \bottomrule
\end{tabular}\\

\newpage

\tableofcontents

\listoftables

\listoffigures

\newpage

\pagenumbering{arabic}

\section{Introduction}

This Module Guide Document serves as a design blueprint for MotionMingle - a WebRTC-based video conferencing application designed to enrich the experience of Tai Chi instruction. It presents a modular perspective of the project, guiding the development team in creating a platform that emphasizes real-time interaction, minimal hardware requirements, and ease of use.

\subsection{Overview}
This Module Guide Document serves as a design blueprint for MotionMingle - a WebRTC-based video conferencing application designed to enrich the experience of Tai Chi instruction. It presents a modular perspective of the project, guiding the development team in creating a platform that emphasizes real-time interaction, minimal hardware requirements, and ease of use.

The document aligns with standards outlined in various project documents, including the SRS, HA, VnVPlan, SystDes, and MIS. \\

SRS - /docs/SRS/SRS.pdf \\

HA - /docs/HazardAnalysis/HazardAnalysis.pdf \\

VnVPlan - /docs/VnVPlan/VnVPlan.pdf \\ 

MIS - /docs/Design/SoftDetailedDes/MIS.pdf \\

\subsection{Purpose}
The aim of this Module Guide Document is to detail the architecture of modules, based on selected design principles and patterns, to clarify the project’s functionalities and the specific roles of each module.

\subsection{Design Principles}
The Module Guide Document employs principles like information hiding, high cohesion, low coupling, high fan-in, and low fan-out for breaking down modules. These principles involve identifying and securing anticipated changes.

\subsection{Design Pattern}
The project utilizes the MVC design pattern, facilitating the division of complex problems into manageable sub tasks across different modules, adhering to the separation of concerns principle.

\section{Anticipated and Unlikely Changes} \label{SecChange}

This section lists possible changes to the system. According to the likeliness
of the change, the possible changes are classified into two
categories. Anticipated changes are listed in Section \ref{SecAchange}, and
unlikely changes are listed in Section \ref{SecUchange}.

\subsection{Anticipated Changes} \label{SecAchange}

Anticipated changes are the source of the information that is to be hidden
inside the modules. Ideally, changing one of the anticipated changes will only
require changing the one module that hides the associated decision. The approach
adopted here is called design for change.

\begin{description}
\item[\refstepcounter{acnum} \actheacnum :] Video stream sharing by practitioners might be allowed for better user communications.
\item[\refstepcounter{acnum} \actheacnum :] Audio stream sharing by practitioners might be allowed for better user communications.
\item[\refstepcounter{acnum} \actheacnum :] The number of annotation types available for users to choose from might change as discovered through the development process.

\item[\refstepcounter{acnum} \actheacnum :] The initial release of the application has a limited load capacity, which will need to be expanded as the application's popularity grows to accommodate a growing number of users.

\item[\refstepcounter{acnum} \actheacnum :] The exactness of annotations is subject to change, given the lack of definitive measurement standards.

\item[\refstepcounter{acnum} \actheacnum :] The application may be extended to offer native client implementation.

\item[\refstepcounter{acnum} \actheacnum :] The application may be extended to offer mobile client implementation.
\item[\refstepcounter{acnum} \actheacnum :] The application could undergo enhancements with new features based on real-world usage insights.
\item[\refstepcounter{acnum} \actheacnum :] The application might incorporate an account login system to verify the identity of instructors.
\end{description}

\subsection{Unlikely Changes} \label{SecUchange}

The module design should be as general as possible. However, a general system is
more complex. Sometimes this complexity is not necessary. Fixing some design
decisions at the system architecture stage can simplify the software design. If
these decision should later need to be changed, then many parts of the design
will potentially need to be modified. Hence, it is not intended that these
decisions will be changed.

\begin{description}
\item[\refstepcounter{ucnum} \uctheucnum:] The need for specific input/output devices is expected to remain stable, given the application's primary function is to augment the instructor’s video stream with annotations.

\item[\refstepcounter{ucnum} \uctheucnum:]  The necessity for a stable internet connection should persist, as the application depends on HTTP requests for communication between server and client.

\item[\refstepcounter{ucnum} \uctheucnum:]  The application's ease of use is anticipated to remain a constant requirement, catering to its primary user base of elderly individuals.

\item[\refstepcounter{ucnum} \uctheucnum:] The requirement for the application to be easy to learn is expected to stay unchanged, considering its elderly user demographic.

\item[\refstepcounter{ucnum} \uctheucnum:] The demand for server reliability and availability is projected to be consistent, due to its critical role in the application's functionality.

\item[\refstepcounter{ucnum} \uctheucnum:] The system is intended to be compatible with the latest versions of Windows, Linux, and macOS.

\item[\refstepcounter{ucnum} \uctheucnum:] Browser compatibility is a designed feature of the system.

\item[\refstepcounter{ucnum} \uctheucnum:] Unauthorized modifications to the application are to be prevented.

\item[\refstepcounter{ucnum} \uctheucnum:] The fundamental feature of adding annotations to the video stream is not expected to change.

\item[\refstepcounter{ucnum} \uctheucnum:] The application's design, ensuring compliance with relevant laws, is foreseen to remain unaltered.

\item[\refstepcounter{ucnum} \uctheucnum:] The client for this project is not expected to change, as it is designed as a student capstone project with limited market potential.

\item[\refstepcounter{ucnum} \uctheucnum:] The stakeholder for this project is unlikely to change, as it is a student capstone project adhering to specific course guidelines.

\item[\refstepcounter{ucnum} \uctheucnum:] The project's schedule and budget constraints are anticipated to stay fixed, in line with the requirements of the student capstone course.
\end{description}

\section{Module Hierarchy} \label{SecMH}

This section provides an overview of the module design. Modules are summarized
in a hierarchy decomposed by secrets in Table \ref{TblMH}. The modules listed
below, which are leaves in the hierarchy tree, are the modules that will
actually be implemented.

\begin{description}
\item [\refstepcounter{mnum} \mthemnum \label{mMC}:] Media Control Module
\item [\refstepcounter{mnum} \mthemnum \label{mUA}:] User Authentication Module
\item [\refstepcounter{mnum} \mthemnum \label{mIV}:] Instructor View Module
\item [\refstepcounter{mnum} \mthemnum \label{mPV}:] Practitioner View Module
\item [\refstepcounter{mnum} \mthemnum \label{mAC}:] Annotation Configuration Module
\item [\refstepcounter{mnum} \mthemnum \label{mSTU}:] STUN Server Module
\item [\refstepcounter{mnum} \mthemnum \label{mRTC}:] RTC Control Module
\item [\refstepcounter{mnum} \mthemnum \label{mAPP}:] App Module
\item [\refstepcounter{mnum} \mthemnum \label{mVT}:] Video Transform Module
\item [\refstepcounter{mnum} \mthemnum \label{mHPE}:] Human Pose Estimation Annotation Module
\item [\refstepcounter{mnum} \mthemnum \label{mCOM}:] Center of Mass Annotation Module
\item [\refstepcounter{mnum} \mthemnum \label{mSFU}:] SFU Server Module
\end{description}


\begin{table}[H]
\centering
\begin{tabular}{p{0.3\textwidth} p{0.6\textwidth}}
\toprule
\textbf{Level 1} & \textbf{Level 2}\\
\midrule

{Hardware-Hiding Module} & M13 \\
\midrule

\multirow{7}{0.3\textwidth}{Behaviour-Hiding Module} & M2\\
& M3\\
& M4\\
& M5\\
& M7\\
\midrule

\multirow{3}{0.3\textwidth}{Software Decision Module} & M6\\
& M8\\
& M9\\
& M10\\
& M11\\
& M12\\
\bottomrule

\end{tabular}
\caption{Module Hierarchy}
\label{TblMH}
\end{table}

\section{Connection Between Requirements and Design} \label{SecConnection}

The design of the system is intended to satisfy the requirements developed in
the SRS. In this stage, the system is decomposed into modules. The connection
between requirements and modules is listed in Table~\ref{TblRT}.

\section{Module Decomposition} \label{SecMD}

Modules are decomposed according to the principle of ``information hiding''
proposed by \citet{ParnasEtAl1984}. The \emph{Secrets} field in a module
decomposition is a brief statement of the design decision hidden by the
module. The \emph{Services} field specifies \emph{what} the module will do
without documenting \emph{how} to do it. For each module, a suggestion for the
implementing software is given under the \emph{Implemented By} title. If the
entry is \emph{OS}, this means that the module is provided by the operating
system or by standard programming language libraries.  \emph{\progname{}} means the
module will be implemented by the \progname{} software.

Only the leaf modules in the hierarchy have to be implemented. If a dash
(\emph{--}) is shown, this means that the module is not a leaf and will not have
to be implemented.

\subsection{Hardware Hiding Modules}

\begin{description}
\item[Secrets:]The data structure and algorithm used to implement the virtual
  hardware.
\item[Services:]Serves as a virtual hardware used by the rest of the
  system. This module provides the interface between the hardware and the
  software. So, the system can use it to display outputs or to accept inputs.
\item[Implemented By:] OS
\end{description}

\subsubsection{Media Control Module (\mref{mMC})}

\begin{description}
\item[Secrets:]The implementation for capturing camera and microphone input from clients.
\item[Services:]Enables users to turn on/off camera and microphone to upload audio and video.
\item[Implemented By:] JavaScript, WebAPI
\item[Type of Module:] Abstract Data Type
\end{description}

\subsection{Behaviour-Hiding Module}

\begin{description}
\item[Secrets:]The contents of the required behaviours.
\item[Services:]Includes programs that provide externally visible behaviour of
  the system as specified in the software requirements specification (SRS)
  documents. This module serves as a communication layer between the
  hardware-hiding module and the software decision module. The programs in this
  module will need to change if there are changes in the SRS.
\item[Implemented By:] --
\end{description}

\subsubsection{User Authentication Module (\mref{mUA})}

\begin{description}
\item[Secrets:] The authentication mechanism and user credentials storage format.
\item[Services:] Authenticates users to grant access to the system based on credentials.
\item[Implemented By:] JavaScript, React
\item[Type of Module:] Abstract Object
\end{description}

\subsubsection{Instructor View Module (\mref{mIV})}

\begin{description}
\item[Secrets:] Instruction delivery and progress tracking mechanisms for instructors.
\item[Services:] Provides instructors with tools to manage course streaming, and interact with participants.
\item[Implemented By:] JavaScript, React
\item[Type of Module:] Abstract Object
\end{description}

\subsubsection{Practitioner View Module (\mref{mPV})}

\begin{description}
\item[Secrets:] User interface customization based on practitioner's preferences.
\item[Services:] Allows practitioners to view available annotations, and select preferred annotations.
\item[Implemented By:] JavaScript, React
\item[Type of Module:] Abstract Object
\end{description}

\subsubsection{Annotation Configuration Module (\mref{mAC})}

\begin{description}
\item[Secrets:] The configuration options for annotation types and parameters.
\item[Services:] Enables users to select and configure various annotation types for personalized course delivery.
\item[Implemented By:] JavaScript, React
\item[Type of Module:] Abstract Data Type
\end{description}

\subsubsection{RTC Control Module (\mref{mRTC})}

\begin{description}
\item[Secrets:] The peer-to-peer connection mechanism and connection between the client and the server.
\item[Services:] Provides other modules the ability to manage WebRTC connections.
\item[Implemented By:] JavaScript, WebAPI
\item[Type of Module:] Abstract Data Type
\end{description}

\subsection{Software Decision Module}

\begin{description}
\item[Secrets:] The design decision based on mathematical theorems, physical
  facts, or programming considerations. The secrets of this module are
  \emph{not} described in the SRS.
\item[Services:] Includes data structure and algorithms used in the system that
  do not provide direct interaction with the user. 
  % Changes in these modules are more likely to be motivated by a desire to
  % improve performance than by externally imposed changes.
\item[Implemented By:] --
\end{description}

\subsubsection{APP Module (\mref{mAPP})}

\begin{description}
\item[Secrets:] The business logic that coordinates the flow of data between modules.
\item[Services:] Manages application state and serves as the central communication hub for other modules.
\item[Implemented By:] JavaScript, React
\item[Type of Module:] Abstract Object
\end{description}

\subsubsection{Video Transform Module (\mref{mVT})}

\begin{description}
\item[Secrets:] Algorithms for video encoding, decoding, and transformation.
\item[Services:] Process video streams to apply transformations such as scaling, rotating, and overlaying annotations.
\item[Implemented By:] Python
\item[Type of Module:] Library
\end{description}

\subsubsection{Human Pose Estimation Annotation Module (\mref{mHPE})}

\begin{description}
\item[Secrets:] The algorithms and data structures used to calculate and represent the skeletal structure of a human figure in video streams.
\item[Services:] Processes video data to overlay a representation of the human skeleton, aiding in the correction and learning of Tai Chi movements.
\item[Implemented By:] Python, opencv-python
\item[Type of Module:] Abstract Object
\end{description}

\subsubsection{Center of Mass Module (\mref{mCOM})}

\begin{description}
\item[Secrets:] The methods used to determine the center of mass in a given pose or series of movements.
\item[Services:] Calculates and displays the center of mass in the video feed to help practitioners understand and improve their balance in various Tai Chi poses.
\item[Implemented By:] Python, opencv-python
\item[Type of Module:] Abstract Object
\end{description}

\subsubsection{SFU Server Module (\mref{mSFU})}

\begin{description}
\item[Secrets:] The implementation of the Selective Forwarding Unit (SFU) for handling media streams.
\item[Services:] Facilitates the routing of media streams between users to support multi-party video conferencing.
\item[Implemented By:] Python, aiortc
\item[Type of Module:] Abstract Object
\end{description}

\subsubsection{STUN Server Module (\mref{mSTU})}

\begin{description}
\item[Secrets:] Network traversal techniques and session negotiation mechanisms.
\item[Services:] Assists in NAT traversal by resolving public IP addresses and enabling peer-to-peer connections.
\item[Implemented By:] Implemented externally
\item[Type of Module:] Abstract Object
\end{description}

\section{Traceability Matrix} \label{SecTM}

This section shows two traceability matrices: between the modules and the
requirements and between the modules and the anticipated changes.

% the table should use mref, the requirements should be named, use something
% like fref
\begin{table}[H]
\centering
\begin{tabular}{p{0.2\textwidth} p{0.6\textwidth}}
\toprule
\textbf{Functional Requirements} & \textbf{Modules}\\
\midrule
FR1 & \mref{mMC}, \mref{mUA}, \mref{mIV}\\
FR2 & \mref{mMC}, \mref{mUA}, \mref{mPV}\\
FR3 & \mref{mMC}, \mref{mUA}, \mref{mIV}, \mref{mPV}\\
FR4 & \mref{mMC}, \mref{mUA}, \mref{mSTU}, \mref{mAPP},\\
FR5 & \mref{mMC}, \mref{mUA}, \mref{mSTU}, \mref{mAPP},\\
FR6 & \mref{mMC}, \mref{mUA}, \mref{mAC}\\
FR7 & \mref{mMC}, \mref{mVT}\\
FR8 & \mref{mMC}, \mref{mHPE}, \mref{mSFU}\\
FR9 & \mref{mMC}, \mref{mSFU}\\
FR10 & \mref{mMC}, \mref{mSFU}\\
FR11 & \mref{mMC}, \mref{mVT}, \mref{mHPE}, \mref{mCOM}, \mref{mSFU}\\
FR12 & \mref{mMC}, \mref{mSTU}, \mref{mAPP}, \mref{mVT}, \mref{mSFU}\\
FR13 & \mref{mMC}, \mref{mSTU}, \mref{mAPP}\\
\bottomrule
\end{tabular}
\caption{Trace Between Requirements and Modules}
\label{TblRT}
\end{table}

\begin{table}[H]
\centering
\begin{tabular}{p{0.2\textwidth} p{0.6\textwidth}}
\toprule
\textbf{Functional Requirements} & \textbf{Modules}\\
\midrule
LF1 & \mref{mMC}, \mref{mUA}, \mref{mIV}\\
UH1 & \mref{mMC}, \mref{mUA}, \mref{mPV}\\
UH2 & \mref{mMC}, \mref{mUA}, \mref{mIV}, \mref{mPV}\\
PR1 & \mref{mMC}, \mref{mUA}, \mref{mSTU}, \mref{mAPP},\\
PR2 & \mref{mMC}, \mref{mUA}, \mref{mSTU}, \mref{mAPP},\\
PR3 & \mref{mMC}, \mref{mUA}, \mref{mAC}\\
PR4 & \mref{mMC}, \mref{mVT}\\
PR5 & \mref{mMC}, \mref{mHPE}, \mref{mSFU}\\
PR6 & \mref{mMC}, \mref{mSFU}\\
PR7 & \mref{mMC}, \mref{mSFU}\\
PR8 & \mref{mMC}, \mref{mVT}, \mref{mHPE}, \mref{mCOM}, \mref{mSFU}\\
PR9 & \mref{mMC}, \mref{mSTU}, \mref{mAPP}, \mref{mVT}, \mref{mSFU}\\
PR10 & \mref{mMC}, \mref{mSTU}, \mref{mAPP}\\
\bottomrule
\end{tabular}
\caption{Trace Between Requirements and Modules}
\label{TblRT}
\end{table}

\begin{table}[H]
\centering
\begin{tabular}{p{0.2\textwidth} p{0.6\textwidth}}
\toprule
\textbf{AC} & \textbf{Modules}\\
\midrule
\acref{acHardware} & \mref{mHH}\\
\acref{acInput} & \mref{mInput}\\
\acref{acParams} & \mref{mParams}\\
\acref{acVerify} & \mref{mVerify}\\
\acref{acOutput} & \mref{mOutput}\\
\acref{acVerifyOut} & \mref{mVerifyOut}\\
\acref{acODEs} & \mref{mODEs}\\
\acref{acEnergy} & \mref{mEnergy}\\
\acref{acControl} & \mref{mControl}\\
\acref{acSeqDS} & \mref{mSeqDS}\\
\acref{acSolver} & \mref{mSolver}\\
\acref{acPlot} & \mref{mPlot}\\
\bottomrule
\end{tabular}
\caption{Trace Between Anticipated Changes and Modules}
\label{TblACT}
\end{table}

\section{Use Hierarchy Between Modules} \label{SecUse}

In this section, the uses hierarchy between modules is
provided. \citet{Parnas1978} said of two programs A and B that A {\em uses} B if
correct execution of B may be necessary for A to complete the task described in
its specification. That is, A {\em uses} B if there exist situations in which
the correct functioning of A depends upon the availability of a correct
implementation of B.  Figure \ref{FigUH} illustrates the use relation between
the modules. It can be seen that the graph is a directed acyclic graph
(DAG). Each level of the hierarchy offers a testable and usable subset of the
system, and modules in the higher level of the hierarchy are essentially simpler
because they use modules from the lower levels.

\begin{figure}[H]
\centering
%\includegraphics[width=0.7\textwidth]{UsesHierarchy.png}
\caption{Use hierarchy among modules}
\label{FigUH}
\end{figure}

%\section*{References}

\bibliographystyle {plainnat}
\bibliography{../../../refs/References}

\newpage{}

\end{document}